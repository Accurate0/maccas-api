datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "cargo prisma"
    output   = "./src/prisma.rs"
}

model Offer {
    id                    String   @id @default(uuid())
    offerId               BigInt
    offerPropositionId    BigInt
    validFrom             DateTime
    validTo               DateTime
    name                  String
    shortName             String
    description           String
    creationDate          DateTime
    imageBaseName         String
    originalImageBaseName String

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    account   Account @relation(fields: [accountId], references: [id])
    accountId String
}

model Account {
    id           String   @id @default(uuid())
    username     String
    password     String
    accessToken  String
    refreshToken String
    offers       Offer[]
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
}

model Job {
    id             String   @id @default(uuid())
    name           String   @unique
    last_execution DateTime
    resume_context Json?    @db.JsonB

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
